# Pentesting-Resources
My Pentesting knowledge I grew throughout the years of Pentesting. This is updated often and I hope it helps you understand! 

# Protocols/Services
* [Protocols](#protocols)
  * [TCP](#TCP)
    * [3-Ways-Handshake](#TCP-3-Ways-Handshake)
  * [UDP](#UDP)

* [Protocols & Services](#Protocols-and-Services)
  * [FTP - TCP - 21](#FTP)
  * [SSH - TCP - 22](#SSH)
  * [Telnet - TCP - 23](#Telnet)
  * [SMTP - TCP - 25](#SMTP)
 
* [Tools](#tools)
  * [Enumeration & Scanning](#Enumeration-and-Scanning)
    * [NMAP](#NMAP)
      * [NSE-Engine](#NSE-Engine)
      * [TCP-Scanning](#NMAP-TCP-Scanning)
      * [UDP-Scanning](#NMAP-UDP-Scanning)
      * [Service-Discovery](#NMAP-Service-Discovery)
      * [OS-Discovery](#NMAP-OS-Discovery)
      * [Vulnerability-Discovery](#NMAP-Vulnerability-Discovery)
# Protocols
Protocols are network ports. In a machine, there's doors aka ports. Each port has a service assigned and number. If opened, it can be access remotely, if filtered there's a Firewall/IDS and if its closed, it cannot be used by the client or host. TCP and UDP are two different sides, meaning if port 22 is opened on TCP, it does not mean its opened on UDP 21, two different neightboor hoods.

### TCP
Transfer Control Protocol (aka TCP/IP) is a connection-oriented protocol, meaning TCP is slower than UDP cause it creates a connection between the sender and receiver with [3-Ways-Handshake](#TCP-3-Ways-Handshake) but guarantees the delivery of the data, in order they were sent and provides errors.
The max TCP port range is 65535.
#### TCP-3-Ways-Handshake
The 3-Ways-Handshake is simple but very good to know and understand. When a client etasblishes a 3-Ways-Handshake, a few things happens. 
The client first sends a SYN packet with a port (often a port like 36557 with a big range to not interfy with other services) to create the socket (connection) on. 
The server then answers by SYN-ACK if okay with it. 
The client responds with ACK to final establish the connection OR the client responds with RST to close the connection.
```
CLIENT: flag: SYN, port: 25, socket port: 35567
SERVER: flag: SYN-ACK, socket port: 35567
CLIENT: flag: ACK, connecting to port 35567...
```

### UDP
User Datagram Protocol is a connectionless protocol, meaning UDP is a lot faster than TCP cause it does not create a connection between the sender and receiver but does not guarrantees the delivery of the data, not in order they were sent and does not provide errors.
The max UDP port range is 65535.
#### UDP-Scanning
NMAP can be used to scan UDP ports. However, this scan is very slow.
```
root@linux: nmap -sU -p0-65535 <host>
```


# Protocols-and-Services
### FTP
File Transfer Protocol runs on port TCP/21 is used to upload, download and view files. Its often alos known as SFTP (Secure File Transfer Protocol).
#### Anonymous Login
AL is a login mechanism that allows any user to login without a user or password. Normally this does not allow to upload files but you can still download and view files.
Username: anonymous  
Password: anonymous@domain.com OR anonymous OR nothing
```
root@linux: ftp@<host>
Connected to <host>.
Name: anonymous
331 Please specify the password.
Password: anonymous@domain.com
...
```
#### Login
Same as AL but change the ussername and password to your credentials.
```
root@linux: ftp@<host>
Connected to <host>.
Name: user
331 Please specify the password.
Password: password
...
```

### SSH
Secure Shell runs on port TCP/22 is used to remotely execute commands. [SSH](#SSH) is purely command-line and does not provide a GUI/UI unlike [RDP](#RDP). Its a very dangerous protocol so it should be well secured.
#### SSH Login (Password vs Key)
You can login to SSH using the ssh tool installed on many system.
  * Password is a simple username+password system.
  * Key-Based uses a private key file mostly RSA which a lot more secure.

I sadly is not familiar with Key-Based Authentication so I will only provide Passowrd authentication.
```
root@linux: ssh <username>@<host>
<username>@<host>â€™s password:
...
```

### Telnet
Telnet runs on port TCP/23 is used to remotely execute commands. Its very similar to [SSH](#SSH), infact... its the older [SSH](#SSH). It works pretty much the same way but the traffic is not encrypted unlike [SSH](#SSH) which makes it very easy to capture the credentials and data being sent. Which is why [SSH](#SSH) stands for Secure Shell.
#### Login
You can login to Telnet using the telnet tool installed on many system.
```
root@linux: telnet <host>

Login Username: user
Login Password: Password
...
```

### SMTP
Simple Mail Transfer Protocol runs on port TCP/25 is used to send emails. SMTP works with other E-Mail related services such as [IMAP](#IMAP) and [POP3](#POP3)
#### Login
SMTP is very particuluar when it comes to logging. You can use [Telnet](#Telnet) to login.
EHLO greets the server and is needed to authenticate.
```
root@linux: telnet <host.smtp.server> 25
EHLO <host.smtp.server>
```
To authenticate, there is two ways, AUTH LOGIN or AUTH PLAIN commands.
#### AUTH LOGIN
Encode your email and password into base64.
```
root@linux: echo -ne "user@host.smtp.server"|base64
dXNlckBob3N0LnNtdHAuc2VydmVy
root@linux: echo -ne "password"|base64
cGFzc3dvcmQ=
```
Then login.
```
AUTH LOGIN
334 VXNlcm5hbWU6 # Asking for the email
dXNlckBob3N0LnNtdHAuc2VydmVy # Encoded email
334 UGFzc3dvcmQ6 # Asking for the password
cGFzc3dvcmQ= # Encoded password
235 Authentication succeeded
```
#### AUTH PLAIN
Encoding your email and password into ONE base64.
```
root@Linux: echo -ne "\0user@smtp.com\0password"|base64
AHVzZXJAc210cC5jb20AcGFzc3dvcmQ
```
Then login.
```
AUTH PLAIN AHVzZXJAc210cC5jb20AcGFzc3dvcmQ
235 Authentication succeeded
```



# Tools
## Enumeration-and-Scanning
### NMAP
Network Mapper is a powerful network and host mapping tool. It provides a lot of scanning techniques and results. Its the first tool you'll use in Pentesting.
#### NSE-Engine
NMAP has a built-in script engine called NSE (NMAP Script Engine). Which allows to load and use scripts to further-up your enumeration and scanning. NSE scripts can be found on internet or provided by NMAP default NSE libraries.  
--script : Allows to load NSE scripts.
#### NMAP-TCP-Scanning
NMAP can be used to scan the target TCP ports also known as [Port Scanning](#Port-Scanning).
```
root@linux: nmap <host>
```
Tip: You can also put -p0-65535 OR -p- instead to scan the entire range.  
-p : Tells NMAP which port(s) to scan. 
```
root@linux: nmap -p0-65535 <host>
```
#### NMAP-UDP-Scanning
NMAP can be used to scan the target UDP ports also known as [Port Scanning](#Port-Scanning).  
-sU : Scans UDP allows to scan UDP ports.
```
root@linux: nmap -sU <host>
```
Tip: You can also put -p0-65535 OR -p- instead to scan the entire range.  
-p : Tells NMAP which port(s) to scan. 
```
root@linux: nmap -p0-65535 -sU <host>
```
#### NMAP-Service-Discovery
NMAP can discover which service, versions and common informations about each port opened. 
```
root@linux: nmap -sS <host>
```
#### NMAP-OS-Discovery
NMAP can discover what OS is running on the target. However this scan can be wrong.  
-O : Enables OS scanning. 
```
root@linux: nmap -O <host>
```
#### NMAP-Vulnerability-Discovery
NMAP can scans for vulnerabilities using the NSE script engine. You can look up different scripts for it but the default one is vuln.  
--script : Allows to load NSE scripts to use. 
```
root@linux: nmap --script=vuln <host>
```
